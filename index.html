<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8" />
        <link rel="icon"
              type="image/svg+xml"
              href="/favicon.ico" />
        <meta name="viewport"
              content="width=device-width, initial-scale=1.0" />
        <title>NoMercyPlayer API</title>

        <!-- <script type="module"
                src="/src/tailwind.ts"></script> -->

    </head>

    <body class="nm-flex nm-flex-col nm-items-center nm-justify-center nm-w-screen nm-h-screen nm-gap-4 nm-text-white nm-bg-zinc-900">

        <div id="container"
             class="nm-flex nm-flex-col nm-justify-center nm-w-full nm-gap-8 p-8 sm:nm-flex-row">
            <div id="wrapper2"
                 class="nm-flex nm-flex-col nm-items-center nm-w-full max-nm-w-4xl nm-gap-2 nm-text-center">
                <span>JWPlayer</span>
                <video id="player2"></video>
            </div>

            <div id="wrapper1"
                 class="nm-flex nm-flex-col nm-items-center nm-w-full max-nm-w-4xl nm-gap-2 nm-text-center">

                <span>VideoJS</span>
                <video id="player1"
                       class="video-js group-hover/button:nm-flex"></video>
            </div>
        </div>

        <div class="nm-flex nm-flex-wrap nm-items-center nm-justify-center nm-gap-4">
            <button type="button"
                    class="nm-w-24 nm-text-white nm-bg-gradient-to-r nm-from-purple-700 nm-to-purple-500 hover:nm-bg-gradient-to-l focus:nm-ring-4 focus:nm-outline-none focus:nm-ring-purple-200 dark:focus:nm-ring-purple-800 nm-font-medium nm-rounded-md nm-text-sm nm-px-3 nm-py-1.5 nm-text-center nm-mr-2 nm-mb-2"
                    onClick="play()">
                Play
            </button>
            <button type="button"
                    class="nm-w-24 nm-text-white nm-bg-gradient-to-r nm-from-purple-700 nm-to-purple-500 hover:nm-bg-gradient-to-l focus:nm-ring-4 focus:nm-outline-none focus:nm-ring-purple-200 dark:focus:nm-ring-purple-800 nm-font-medium nm-rounded-md nm-text-sm nm-px-3 nm-py-1.5 nm-text-center nm-mr-2 nm-mb-2"
                    onClick="pause()">
                Pause
            </button>
            <button type="button"
                    class="nm-w-24 nm-text-white nm-bg-gradient-to-r nm-from-purple-700 nm-to-purple-500 hover:nm-bg-gradient-to-l focus:nm-ring-4 focus:nm-outline-none focus:nm-ring-purple-200 dark:focus:nm-ring-purple-800 nm-font-medium nm-rounded-md nm-text-sm nm-px-3 nm-py-1.5 nm-text-center nm-mr-2 nm-mb-2"
                    onClick="next()">
                Next
            </button>
            <button type="button"
                    class="nm-w-24 nm-text-white nm-bg-gradient-to-r nm-from-purple-700 nm-to-purple-500 hover:nm-bg-gradient-to-l focus:nm-ring-4 focus:nm-outline-none focus:nm-ring-purple-200 dark:focus:nm-ring-purple-800 nm-font-medium nm-rounded-md nm-text-sm nm-px-3 nm-py-1.5 nm-text-center nm-mr-2 nm-mb-2"
                    onClick="prev()">
                Prev
            </button>
            <button type="button"
                    class="nm-w-24 nm-text-white nm-bg-gradient-to-r nm-from-purple-700 nm-to-purple-500 hover:nm-bg-gradient-to-l focus:nm-ring-4 focus:nm-outline-none focus:nm-ring-purple-200 dark:focus:nm-ring-purple-800 nm-font-medium nm-rounded-md nm-text-sm nm-px-3 nm-py-1.5 nm-text-center nm-mr-2 nm-mb-2"
                    onClick="sync()">
                Sync
            </button>
        </div>

        <script type="module"
                src="/src/nomercyplayer.ts"></script>


        <script type="module">

            const config = {
                muted: false,
                controls: false,
                // chapters: false,
                preload: 'auto',
                playlist: 'https://api-dev.nomercy.tv/playlist-js?v=1',
                controlsTimeout: 3000,
                doubleClickDelay: 500,
                playbackRates: [
                    0.25,
                    0.5,
                    0.75,
                    1,
                    1.25,
                    1.5,
                    1.75,
                    2,
                ],
                styles: {
                    sliderProgressStyles: ['nm-bg-red-500'],
                    chapterMarkerProgressStyles: ['nm-bg-red-500'],
                    sliderNippleStyles: ['nm-bg-red-500'],
                    // sliderBarStyles: ['!nm-bg-transparent'],
                }
            };

            const js = new VideoPlayer('videojs', config, 'player1');
            window.js = js;

            js.on('theaterMode', (data) => {
                // handle resize container
                console.log('theaterMode', data);
                if (data) {
                    document.querySelector('body').classList.remove('nm-justify-center');
                    document.querySelector('#container').classList.remove('sm:nm-flex-row');
                    document.querySelector('#wrapper1').classList.remove('max-nm-w-4xl');
                    document.querySelector('#wrapper1').classList.remove('nm-w-full');
                    document.querySelector('#wrapper1').classList.add('nm-w-2/3');
                } else {
                    document.querySelector('body').classList.add('nm-justify-center');
                    document.querySelector('#container').classList.add('sm:nm-flex-row');
                    document.querySelector('#wrapper1').classList.add('max-nm-w-4xl');
                    document.querySelector('#wrapper1').classList.add('nm-w-full');
                    document.querySelector('#wrapper1').classList.remove('nm-w-2/3');
                }
            });
            js.on('pip', (data) => {
                console.log('pip', data);
                if (data) {
                    document.querySelector('#wrapper1').classList.add('absolute');
                    document.querySelector('#wrapper1').classList.add('bottom-4');
                    document.querySelector('#wrapper1').classList.add('right-4');
                    document.querySelector('#wrapper1').classList.add('max-nm-w-sm');
                } else {
                    document.querySelector('#wrapper1').classList.remove('absolute');
                    document.querySelector('#wrapper1').classList.remove('bottom-4');
                    document.querySelector('#wrapper1').classList.remove('right-4');
                    document.querySelector('#wrapper1').classList.remove('max-nm-w-sm');
                }
            });


            config.key = 'W7zSm81+mmIsg7F+fyHRKhF3ggLkTqtGMhvI92kbqf/ysE99';
            const jw = new VideoPlayer('jwplayer', config, 'player2');

            window.jw = jw;

            jw.on('theaterMode', (data) => {
                // handle resize container
                console.log('theaterMode', data);
                if (data) {
                    document.querySelector('body').classList.remove('nm-justify-center');
                    document.querySelector('#container').classList.remove('sm:nm-flex-row');
                    document.querySelector('#wrapper2').classList.remove('max-nm-w-4xl');
                    document.querySelector('#wrapper2').classList.remove('nm-w-full');
                    document.querySelector('#wrapper2').classList.add('nm-w-2/3');
                } else {
                    document.querySelector('body').classList.add('nm-justify-center');
                    document.querySelector('#container').classList.add('sm:nm-flex-row');
                    document.querySelector('#wrapper2').classList.add('max-nm-w-4xl');
                    document.querySelector('#wrapper2').classList.add('nm-w-full');
                    document.querySelector('#wrapper2').classList.remove('nm-w-2/3');
                }
            });
            jw.on('pip', (data) => {
                console.log('pip', data);
                if (data) {
                    document.querySelector('#wrapper2').classList.add('absolute');
                    document.querySelector('#wrapper2').classList.add('bottom-4');
                    document.querySelector('#wrapper2').classList.add('right-4');
                    document.querySelector('#wrapper2').classList.add('max-nm-w-sm');
                } else {
                    document.querySelector('#wrapper2').classList.remove('absolute');
                    document.querySelector('#wrapper2').classList.remove('bottom-4');
                    document.querySelector('#wrapper2').classList.remove('right-4');
                    document.querySelector('#wrapper2').classList.remove('max-nm-w-sm');
                }
            });
        </script>

        <script>
            function play() {
                js.play();
                jw.play();
            }

            function pause() {
                js.pause();
                jw.pause();
            }

            function next() {
                js.next();
                jw.next();
            }

            function prev() {
                js.prev();
                jw.prev();
            }

            function sync() {
                js.seek(jw.currentTime());
            }

        </script>
    </body>

</html>