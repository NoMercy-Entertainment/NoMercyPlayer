<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Buckyplayer API</title>

    <script src="https://cdn.tailwindcss.com" ></script>

    <script src="/dist/app.js" defer></script>
  </head>
  <body>
    <body class="flex flex-col w-screen h-screen gap-4 items-center justify-center bg-zinc-900 text-white">

        <div class="flex flex-col sm:flex-row justify-center w-full gap-8">
            <div class="flex flex-col items-center w-full text-center gap-2">
                <span>VideoJS</span>
                <video id="player1" class="video-js" ></video>
                <span id="currJS">VideoJS</span>
            </div>

            <div class="flex sm:flex-col flex-wrap gap-4 items-center justify-center">
                <button type="button"
                    class="w-24 text-white bg-gradient-to-r from-purple-700 to-purple-500 hover:bg-gradient-to-l focus:ring-4 focus:outline-none focus:ring-purple-200 dark:focus:ring-purple-800 font-medium rounded-md text-sm px-3 py-1.5 text-center mr-2 mb-2"
                    onClick="play()">
                    Play
                </button>
                <button type="button"
                    class="w-24 text-white bg-gradient-to-r from-purple-700 to-purple-500 hover:bg-gradient-to-l focus:ring-4 focus:outline-none focus:ring-purple-200 dark:focus:ring-purple-800 font-medium rounded-md text-sm px-3 py-1.5 text-center mr-2 mb-2"
                    onClick="pause()">
                    Pause
                </button>
                <button type="button"
                    class="w-24 text-white bg-gradient-to-r from-purple-700 to-purple-500 hover:bg-gradient-to-l focus:ring-4 focus:outline-none focus:ring-purple-200 dark:focus:ring-purple-800 font-medium rounded-md text-sm px-3 py-1.5 text-center mr-2 mb-2"
                    onClick="next()">
                    Next
                </button>
                <button type="button"
                    class="w-24 text-white bg-gradient-to-r from-purple-700 to-purple-500 hover:bg-gradient-to-l focus:ring-4 focus:outline-none focus:ring-purple-200 dark:focus:ring-purple-800 font-medium rounded-md text-sm px-3 py-1.5 text-center mr-2 mb-2"
                    onClick="prev()">
                    Prev
                </button>
                <button type="button"
                    class="w-24 text-white bg-gradient-to-r from-purple-700 to-purple-500 hover:bg-gradient-to-l focus:ring-4 focus:outline-none focus:ring-purple-200 dark:focus:ring-purple-800 font-medium rounded-md text-sm px-3 py-1.5 text-center mr-2 mb-2"
                    onClick="sync()">
                    Sync
                </button>
            </div>

            <div class="flex flex-col items-center w-full text-center gap-2">
                <span>JWPlayer</span>
                <video id="player2"></video>
                <span id="currJW">JWPlayer</span>
            </div>
        </div>

        <script type="module" >

          import { VideoPlayer } from '/dist/buckyplayer.js';

            const size = window.innerWidth < 500 
                ? window.innerWidth < 800 
                    ? window.innerWidth 
                    : 256
                : 640;

            const config = {
                width: size,
                height: size / 16 * 9,
                muted: true,
                playlist: 'https://api.nomercy.tv/playlist?v=2',
                elementId: 'player1',
            };

            const js = new VideoPlayer('videojs', config, 'player1');
            window.js = js;
            
            js.on('ready', (data) => {
              
              js.on('displayMessage', (data) => {
                  console.log('displayMessage', data);
              });
              js.on('removeMessage', (data) => {
                  console.log('removeMessage', data);
              });

              js.on('volume', (data) => {
                  js.displayMessage(`Volume: ${data.volume}%`);
              });
              js.on('time', (data) => {
                  const currJS = document.getElementById('currJS');
                  currJS.innerHTML = `${js.humanTime(data.position)} - ${parseInt(data.percentage, 10)}% - ${js.humanTime(data.remaining)}`;
              });
            });

            config.key = 'W7zSm81+mmIsg7F+fyHRKhF3ggLkTqtGMhvI92kbqf/ysE99';
            const jw = new VideoPlayer('jwplayer', config, 'player2');
            
            window.jw = jw;
            
            jw.on('ready', (data) => {
              
              jw.on('displayMessage', (data) => {
                  console.log('displayMessage', data);
              });
              jw.on('removeMessage', (data) => {
                  console.log('removeMessage', data);
              });

              jw.on('volume', (data) => {
                  jw.displayMessage(`Volume: ${data.volume}%`);
              });
              jw.on('time', (data) => {
                  const currJW = document.getElementById('currJW');
                  currJW.innerHTML = `${jw.humanTime(data.position)} - ${parseInt(data.percentage, 10)}% - ${jw.humanTime(data.remaining)}`;
              });
            });
        </script>
  </body>
</html>
